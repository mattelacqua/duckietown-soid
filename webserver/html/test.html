<!DOCTYPE html>
<html lang="en">
  <head>
    <!--Import Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <!--Import JQuery-->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!--Import SocketIO-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js"></script>
    <meta charset="utf-8">
    <title>Agent1 Angle</title>
  </head>
  
  <body style="background-color:SandDollar">
    {% for agent in agent_list %}
    <p style="text-align:center;color:{{agent.color}};font-size:200%"><b>{{agent.agent_id}}</b>:</p>
    <div class="d-flex justify-content-center my-4">
        <span class="font-weight-bold indigo-text mr-2 mt-1">0&nbsp;&nbsp;</span>
        <form class="range-field w-50">
        <input type="range" min="0" max="360" value="0" class="form-range" id={{agent.agent_id}} name={{agent.agent_id}} oninput="display(this.value, this.id)" onchange="agent_angle(this, this.id)">
        </form>
        <span class="font-weight-bold indigo-text mr-2 mt-1">&nbsp;&nbsp;360</span>
    </div>
    <div class="d-flex justify-content-center my-4">
        <span>{{agent.agent_id}} angle is set to:&nbsp;&nbsp; </span>
        <span id="display{{loop.index0}}"><b>0</b></span>
    </div>
    {% endfor %}
    <div class="d-flex justify-content-center my-4">
        <input type="button" class="btn btn-success" value="Resume Simulation" onclick="resume_simulation()"> 
    </div>
    <script>
        var socket = io()
        function resume_simulation(){
            socket.emit('resume_simulation')
        }
    </script>
    <script>
        function display(val, id) {
          var str = id;
          var c = str.charAt(str.length - 1)
          var val_id = "display" + c
          document.getElementById(val_id).innerHTML = val;
        }
    </script>
    <script type="text/javascript">
        var socket = io()
        function agent_angle(slider, id){
            socket.emit('agent_angle',
                        {
                            'id':id,
                            'value':$(slider).val()
                        })
        }
    </script>
  </body>
</html>
