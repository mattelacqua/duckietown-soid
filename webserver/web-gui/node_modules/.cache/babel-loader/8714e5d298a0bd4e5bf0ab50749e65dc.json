{"ast":null,"code":"var _jsxFileName = \"/Users/mattelacqua/Workspace/duckietown-soid/webserver/web-gui/src/AgentMap.js\";\nimport React from 'react';\nimport { Chart as ChartJS, LinearScale, PointElement, LineElement, Tooltip, Legend } from 'chart.js';\nimport { Scatter } from 'react-chartjs-2';\nimport 'chartjs-plugin-dragdata';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(LinearScale, PointElement, LineElement, Tooltip, Legend);\n\nclass AgentMap extends React.Component {\n  // Constructor\n  constructor(props) {\n    super(props); // Init Datasets\n\n    const datasets = [];\n    this.props.agents.forEach(function (agent) {\n      datasets.push({\n        label: agent.agent_id,\n        data: [agent.cur_pos],\n        backgroundColor: agent.color\n      });\n    });\n    this.update_agent_pos = this.update_agent_pos.bind(this); //\n    // Init State\n\n    this.state = {\n      agents: this.props.agents,\n      data: {\n        datasets\n      }\n    }; // End state\n\n    console.log(this.state.data);\n  }\n\n  update_agent_pos(e, datasetIndex, index, value) {\n    console.log('E');\n    console.log(e);\n    console.log('datasetIndex');\n    console.log(datasetIndex);\n    console.log('index');\n    console.log(index);\n    console.log('value');\n    console.log(value);\n  }\n\n  render() {\n    const options = {\n      // Parsing\n      parsing: {\n        xAxisKey: 'x',\n        yAxisKey: 'z'\n      },\n      // Scales x and y\n      scales: {\n        y: {\n          beginAtZero: true,\n          min: 0,\n          max: this.props.max_NS,\n          reverse: true,\n          grid: {\n            color: 'LightGray'\n          },\n          ticks: {\n            stepSize: this.props.tile_size\n          }\n        },\n        // End y\n        x: {\n          beginAtZero: true,\n          min: 0,\n          max: this.props.max_EW,\n          grid: {\n            color: 'LightGray'\n          },\n          ticks: {\n            stepSize: this.props.tile_size\n          }\n        } // End x\n\n      },\n      // End Scales\n      // Plugins\n      responsive: true,\n      plugins: {\n        tooltip: {\n          callbacks: {\n            title: function (context) {\n              const timeString = new Date(context[0].parsed.x).toLocaleTimeString(navigator.language, {\n                hour: '2-digit',\n                minute: '2-digit'\n              });\n              return timeString;\n            }\n          }\n        },\n        // End Callbacks\n        dragData: {\n          round: 3,\n          showTooltip: true,\n          onDragStart: function (e, datasetIndex, index, value) {},\n          onDrag: function (e, datasetIndex, index, value) {\n            e.target.style.cursor = 'grabbing';\n            console.log(\"Drag Value: \", value);\n          },\n          onDragEnd: function (e, datasetIndex, index, value) {\n            e.target.style.cursor = 'default';\n          }\n        } // End drag Data\n\n      } // End plugin\n\n    }; // End options  \n\n    return /*#__PURE__*/_jsxDEV(ChartJS, {\n      options: options,\n      data: this.state.data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default AgentMap;","map":{"version":3,"names":["React","Chart","ChartJS","LinearScale","PointElement","LineElement","Tooltip","Legend","Scatter","register","AgentMap","Component","constructor","props","datasets","agents","forEach","agent","push","label","agent_id","data","cur_pos","backgroundColor","color","update_agent_pos","bind","state","console","log","e","datasetIndex","index","value","render","options","parsing","xAxisKey","yAxisKey","scales","y","beginAtZero","min","max","max_NS","reverse","grid","ticks","stepSize","tile_size","x","max_EW","responsive","plugins","tooltip","callbacks","title","context","timeString","Date","parsed","toLocaleTimeString","navigator","language","hour","minute","dragData","round","showTooltip","onDragStart","onDrag","target","style","cursor","onDragEnd"],"sources":["/Users/mattelacqua/Workspace/duckietown-soid/webserver/web-gui/src/AgentMap.js"],"sourcesContent":["import React from 'react';\nimport {\n  Chart as ChartJS,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Scatter } from 'react-chartjs-2';\nimport 'chartjs-plugin-dragdata';\n\nChartJS.register(LinearScale, PointElement, LineElement, Tooltip, Legend);\n\nclass AgentMap extends React.Component {\n\n  // Constructor\n  constructor(props) {\n    super(props);\n\n    // Init Datasets\n    const datasets = [];\n    this.props.agents.forEach(function (agent) {\n      datasets.push({\n        label: agent.agent_id,\n        data: [agent.cur_pos],\n        backgroundColor: agent.color,\n      });\n    });\n\n    this.update_agent_pos = this.update_agent_pos.bind(this);\n    //\n    // Init State\n    this.state = {\n      agents: this.props.agents,\n\n      data:{datasets},\n    }; // End state\n    console.log(this.state.data);\n  }\n\n  update_agent_pos(e, datasetIndex, index, value) {\n    console.log('E');\n    console.log(e);\n    console.log('datasetIndex');\n    console.log(datasetIndex);\n    console.log('index');\n    console.log(index);\n    console.log('value');\n    console.log(value);\n  }\n\n  render() {\n    const options = {\n          // Parsing\n          parsing: {\n              xAxisKey: 'x',\n              yAxisKey: 'z',\n          },\n\n          // Scales x and y\n          scales: {\n            y: {\n              beginAtZero: true,\n              min : 0,\n              max : this.props.max_NS,\n              reverse : true,\n              grid : {\n                  color: 'LightGray',\n              },\n              ticks: {\n                stepSize: this.props.tile_size,\n              }\n\n            }, // End y\n            x: {\n              beginAtZero: true,\n              min : 0,\n              max : this.props.max_EW,\n              grid : {\n                  color: 'LightGray',\n              },\n              ticks: {\n                stepSize: this.props.tile_size,\n              }\n            }, // End x\n          }, // End Scales\n          \n          // Plugins\n          responsive: true,\n          plugins: {\n            tooltip: {\n                  callbacks: {\n                    title: function(context) {\n                      const timeString = new Date(context[0].parsed.x).toLocaleTimeString(navigator.language, {\n            hour: '2-digit',\n            minute:'2-digit'\n          })\n\n                      return timeString\n                    }\n                  }\n                }, // End Callbacks\n              dragData: {\n                round: 3,\n                showTooltip: true,\n                onDragStart:function (e, datasetIndex, index, value) {\n                },\n                onDrag: function (e, datasetIndex, index, value) {\n                    e.target.style.cursor = 'grabbing'\n                    console.log(\"Drag Value: \", value)\n                },\n                onDragEnd: function (e, datasetIndex, index, value) {\n                    e.target.style.cursor = 'default'\n                },\n              }, // End drag Data\n          }, // End plugin\n        }; // End options  \n\n     return <ChartJS options={options} data={this.state.data} />;\n  }\n}\n\nexport default AgentMap;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}