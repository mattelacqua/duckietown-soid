{"ast":null,"code":"var _jsxFileName = \"/Users/mattelacqua/Workspace/duckietown-soid/webserver/web-gui/src/App.js\";\n// Import styplesheet for App\nimport './App.css'; // Import React for components\n\nimport React from 'react'; // Import Agent since it will be rendered in appb\n\nimport Agent from './Agent.js'; // Import Environment since it will be rendered in app\n\nimport Environment from './Environment.js'; // Import Agentmpa\n\nimport AgentMap from './AgentMap.js'; // Import RenderedScene\n\nimport RenderedScene from './RenderedScene.js'; // Our top level class (gets rendered in index.html)\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  // Constructor for component (set up what our App's state is)\n  constructor(props) {\n    super(props); // State contains a list of agents (json format), and a bool for if the data loaded\n\n    this.state = {\n      agents: [],\n      env_info: [],\n      AgentsLoaded: false,\n      EnvLoaded: false,\n      rendred_imgLoaded: false,\n      rendered_img: new Image()\n    };\n    this.pos_pass = this.pos_pass.bind(this); // Bind angle pass to this component\n  } // When we renderour App, fetch the agent information\n\n\n  componentDidMount() {\n    // Fetch from our proxy (webserver.py, which when /agents is loaded will return our agents json information),\n    fetch(\"/agents\") // Shorthand for http://localhost:5000/agetns\n    .then(res => res.json()) // Result becomes a json\n    .then(json => {\n      // take the json and set the state vars with it\n      this.setState({\n        agents: json,\n        AgentsLoaded: true\n      });\n    }); // Fetch for env info\n\n    fetch(\"/envInfo\") // Shorthand for http://localhost:5000/agetns\n    .then(res => res.json()) // Result becomes a json\n    .then(json => {\n      // take the json and set the state vars with it\n      this.setState({\n        env_info: json,\n        EnvLoaded: true\n      });\n    }); // Get the rendered image\n\n    const image = new Image();\n    image.src = 'http://localhost:5000/renderedScene';\n    this.setState({\n      rendered_img: image,\n      rendered_imgLoaded: true\n    });\n  }\n\n  pos_pass(id, x, y) {\n    let agents = [...this.state.agents];\n    let agent = { ...agents[id]\n    };\n    agent.cur_pos = {\n      'x': x,\n      'y': y\n    };\n    agents[id] = agent;\n    this.setState({\n      agents\n    });\n    console.log(this.state.agents);\n  } // Render Our App Component ( calls to Agent subchildren)\n\n\n  render() {\n    // Pull agents and the data loaded from our state (these were set in componentDidMount)\n    const {\n      AgentsLoaded,\n      EnvLoaded,\n      rendered_imgLoaded,\n      agents,\n      env_info,\n      rendered_img\n    } = this.state; // If our data didn't load, lets write HTML that we are waiting \n\n    if (!AgentsLoaded) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Please wait some time to load Agent information.... \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 35\n    }, this);\n    if (!EnvLoaded) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Please wait some time to load Environmen information.... \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 32\n    }, this);\n    if (!rendered_imgLoaded) return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Please wait some time to load Rendered Scene .... \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 41\n    }, this); // When our data is loaded, we want to return the HTML/REACT Calls for the APP\n\n    return (\n      /*#__PURE__*/\n      // Div to clump app up into one component to render\n      _jsxDEV(\"div\", {\n        className: \"App\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \" SCENE \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(RenderedScene, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \" Fetch data from an api in reacts \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Environment, {\n          max_NS: env_info.max_NS,\n          max_EW: env_info.max_EW,\n          tile_size: env_info.tile_size\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(AgentMap, {\n          agents: agents,\n          max_NS: env_info.max_NS,\n          max_EW: env_info.max_EW,\n          tile_size: env_info.tile_size,\n          pos_pass: this.pos_pass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this), agents.map(agent =>\n        /*#__PURE__*/\n\n        /* Render an Agent component, with props: agent_id, cur_angle, cur_pos, color */\n        _jsxDEV(Agent, {\n          agent_id: agent.agent_id,\n          cur_angle: agent.cur_angle,\n          cur_pos: agent.cur_pos,\n          color: agent.color,\n          lights: agent.lights\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    ); // End of return\n  }\n\n} // Allow it to be called in other functions\n\n\nexport default App;","map":{"version":3,"names":["React","Agent","Environment","AgentMap","RenderedScene","App","Component","constructor","props","state","agents","env_info","AgentsLoaded","EnvLoaded","rendred_imgLoaded","rendered_img","Image","pos_pass","bind","componentDidMount","fetch","then","res","json","setState","image","src","rendered_imgLoaded","id","x","y","agent","cur_pos","console","log","render","max_NS","max_EW","tile_size","map","agent_id","cur_angle","color","lights"],"sources":["/Users/mattelacqua/Workspace/duckietown-soid/webserver/web-gui/src/App.js"],"sourcesContent":["// Import styplesheet for App\nimport './App.css';\n\n// Import React for components\nimport React from 'react'\n\n// Import Agent since it will be rendered in appb\nimport Agent from './Agent.js'\n\n// Import Environment since it will be rendered in app\nimport Environment from './Environment.js'\n\n// Import Agentmpa\nimport AgentMap from './AgentMap.js'\n\n// Import RenderedScene\nimport RenderedScene from './RenderedScene.js'\n// Our top level class (gets rendered in index.html)\nclass App extends React.Component{\n\n    // Constructor for component (set up what our App's state is)\n    constructor(props) {\n        super(props);\n   \n        // State contains a list of agents (json format), and a bool for if the data loaded\n        this.state = {\n            agents: [],\n            env_info: [],\n            AgentsLoaded: false,\n            EnvLoaded: false,\n            rendred_imgLoaded: false,\n            rendered_img: new Image(),\n        };\n        this.pos_pass = this.pos_pass.bind(this); // Bind angle pass to this component\n    }\n\n    // When we renderour App, fetch the agent information\n    componentDidMount() {\n        // Fetch from our proxy (webserver.py, which when /agents is loaded will return our agents json information),\n        fetch(\"/agents\") // Shorthand for http://localhost:5000/agetns\n            .then((res) => res.json()) // Result becomes a json\n            .then((json) => { // take the json and set the state vars with it\n                this.setState({\n                    agents: json,\n                    AgentsLoaded: true\n                });\n            });\n\n        // Fetch for env info\n        fetch(\"/envInfo\") // Shorthand for http://localhost:5000/agetns\n            .then((res) => res.json()) // Result becomes a json\n            .then((json) => { // take the json and set the state vars with it\n                this.setState({\n                    env_info: json,\n                    EnvLoaded: true\n                });\n            });\n\n      // Get the rendered image\n      const image = new Image();\n      image.src = 'http://localhost:5000/renderedScene';\n      this.setState({\n        rendered_img: image,\n        rendered_imgLoaded: true\n      });\n    }\n   \n    pos_pass(id, x, y) {\n      let agents = [...this.state.agents];\n      let agent = {...agents[id]};\n      agent.cur_pos = {'x': x, \n                       'y': y}\n      agents[id] = agent;\n      this.setState({agents});\n      console.log(this.state.agents);\n    }\n\n    // Render Our App Component ( calls to Agent subchildren)\n    render() {\n        \n        // Pull agents and the data loaded from our state (these were set in componentDidMount)\n        const { AgentsLoaded, EnvLoaded, rendered_imgLoaded, agents, env_info, rendered_img} = this.state;\n        \n        // If our data didn't load, lets write HTML that we are waiting \n        if (!AgentsLoaded) return <div>\n            <h1> Please wait some time to load Agent information.... </h1> </div> ;\n\n        if (!EnvLoaded) return <div>\n            <h1> Please wait some time to load Environmen information.... </h1> </div> ;\n   \n        if (!rendered_imgLoaded) return <div>\n            <h1> Please wait some time to load Rendered Scene .... </h1> </div> ;\n        // When our data is loaded, we want to return the HTML/REACT Calls for the APP\n        return (\n\n        // Div to clump app up into one component to render\n        <div className = \"App\"> {/* Using app.css stylesheet */}\n            {/* Header text */}\n            <h1> SCENE </h1> \n            <RenderedScene />\n            <h1> Fetch data from an api in reacts </h1> \n              <Environment  max_NS={env_info.max_NS} \n                            max_EW={env_info.max_EW} \n                            tile_size={env_info.tile_size}/>\n              <AgentMap agents={agents} \n                        max_NS={env_info.max_NS} \n                        max_EW={env_info.max_EW} \n                        tile_size={env_info.tile_size} \n                        pos_pass={this.pos_pass}/>\n                {\n                agents.map((agent) => ( \n                    /* Render an Agent component, with props: agent_id, cur_angle, cur_pos, color */\n                    <Agent agent_id={agent.agent_id} \n                           cur_angle={agent.cur_angle}\n                           cur_pos={agent.cur_pos}\n                           color={agent.color} \n                           lights={agent.lights} />\n                ))\n            }\n\n        </div>\n    ); // End of return\n}\n}\n\n\n// Allow it to be called in other functions\nexport default App;\n"],"mappings":";AAAA;AACA,OAAO,WAAP,C,CAEA;;AACA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,OAAOC,KAAP,MAAkB,YAAlB,C,CAEA;;AACA,OAAOC,WAAP,MAAwB,kBAAxB,C,CAEA;;AACA,OAAOC,QAAP,MAAqB,eAArB,C,CAEA;;AACA,OAAOC,aAAP,MAA0B,oBAA1B,C,CACA;;;;AACA,MAAMC,GAAN,SAAkBL,KAAK,CAACM,SAAxB,CAAiC;EAE7B;EACAC,WAAW,CAACC,KAAD,EAAQ;IACf,MAAMA,KAAN,EADe,CAGf;;IACA,KAAKC,KAAL,GAAa;MACTC,MAAM,EAAE,EADC;MAETC,QAAQ,EAAE,EAFD;MAGTC,YAAY,EAAE,KAHL;MAITC,SAAS,EAAE,KAJF;MAKTC,iBAAiB,EAAE,KALV;MAMTC,YAAY,EAAE,IAAIC,KAAJ;IANL,CAAb;IAQA,KAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB,CAZe,CAY2B;EAC7C,CAhB4B,CAkB7B;;;EACAC,iBAAiB,GAAG;IAChB;IACAC,KAAK,CAAC,SAAD,CAAL,CAAiB;IAAjB,CACKC,IADL,CACWC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADnB,EAC+B;IAD/B,CAEKF,IAFL,CAEWE,IAAD,IAAU;MAAE;MACd,KAAKC,QAAL,CAAc;QACVd,MAAM,EAAEa,IADE;QAEVX,YAAY,EAAE;MAFJ,CAAd;IAIH,CAPL,EAFgB,CAWhB;;IACAQ,KAAK,CAAC,UAAD,CAAL,CAAkB;IAAlB,CACKC,IADL,CACWC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADnB,EAC+B;IAD/B,CAEKF,IAFL,CAEWE,IAAD,IAAU;MAAE;MACd,KAAKC,QAAL,CAAc;QACVb,QAAQ,EAAEY,IADA;QAEVV,SAAS,EAAE;MAFD,CAAd;IAIH,CAPL,EAZgB,CAqBlB;;IACA,MAAMY,KAAK,GAAG,IAAIT,KAAJ,EAAd;IACAS,KAAK,CAACC,GAAN,GAAY,qCAAZ;IACA,KAAKF,QAAL,CAAc;MACZT,YAAY,EAAEU,KADF;MAEZE,kBAAkB,EAAE;IAFR,CAAd;EAID;;EAEDV,QAAQ,CAACW,EAAD,EAAKC,CAAL,EAAQC,CAAR,EAAW;IACjB,IAAIpB,MAAM,GAAG,CAAC,GAAG,KAAKD,KAAL,CAAWC,MAAf,CAAb;IACA,IAAIqB,KAAK,GAAG,EAAC,GAAGrB,MAAM,CAACkB,EAAD;IAAV,CAAZ;IACAG,KAAK,CAACC,OAAN,GAAgB;MAAC,KAAKH,CAAN;MACC,KAAKC;IADN,CAAhB;IAEApB,MAAM,CAACkB,EAAD,CAAN,GAAaG,KAAb;IACA,KAAKP,QAAL,CAAc;MAACd;IAAD,CAAd;IACAuB,OAAO,CAACC,GAAR,CAAY,KAAKzB,KAAL,CAAWC,MAAvB;EACD,CAzD4B,CA2D7B;;;EACAyB,MAAM,GAAG;IAEL;IACA,MAAM;MAAEvB,YAAF;MAAgBC,SAAhB;MAA2Bc,kBAA3B;MAA+CjB,MAA/C;MAAuDC,QAAvD;MAAiEI;IAAjE,IAAiF,KAAKN,KAA5F,CAHK,CAKL;;IACA,IAAI,CAACG,YAAL,EAAmB,oBAAO;MAAA,wBACtB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADsB;IAAA;MAAA;MAAA;MAAA;IAAA,QAAP;IAGnB,IAAI,CAACC,SAAL,EAAgB,oBAAO;MAAA,wBACnB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADmB;IAAA;MAAA;MAAA;MAAA;IAAA,QAAP;IAGhB,IAAI,CAACc,kBAAL,EAAyB,oBAAO;MAAA,wBAC5B;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAD4B;IAAA;MAAA;MAAA;MAAA;IAAA,QAAP,CAZpB,CAcL;;IACA;MAAA;MAEA;MACA;QAAK,SAAS,EAAG,KAAjB;QAAA,6BAEI;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFJ,eAGI,QAAC,aAAD;UAAA;UAAA;UAAA;QAAA,QAHJ,eAII;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAJJ,eAKM,QAAC,WAAD;UAAc,MAAM,EAAEhB,QAAQ,CAACyB,MAA/B;UACc,MAAM,EAAEzB,QAAQ,CAAC0B,MAD/B;UAEc,SAAS,EAAE1B,QAAQ,CAAC2B;QAFlC;UAAA;UAAA;UAAA;QAAA,QALN,eAQM,QAAC,QAAD;UAAU,MAAM,EAAE5B,MAAlB;UACU,MAAM,EAAEC,QAAQ,CAACyB,MAD3B;UAEU,MAAM,EAAEzB,QAAQ,CAAC0B,MAF3B;UAGU,SAAS,EAAE1B,QAAQ,CAAC2B,SAH9B;UAIU,QAAQ,EAAE,KAAKrB;QAJzB;UAAA;UAAA;UAAA;QAAA,QARN,EAcQP,MAAM,CAAC6B,GAAP,CAAYR,KAAD;QAAA;;QACP;QACA,QAAC,KAAD;UAAO,QAAQ,EAAEA,KAAK,CAACS,QAAvB;UACO,SAAS,EAAET,KAAK,CAACU,SADxB;UAEO,OAAO,EAAEV,KAAK,CAACC,OAFtB;UAGO,KAAK,EAAED,KAAK,CAACW,KAHpB;UAIO,MAAM,EAAEX,KAAK,CAACY;QAJrB;UAAA;UAAA;UAAA;QAAA,QAFJ,CAdR;MAAA;QAAA;QAAA;QAAA;MAAA;IAHA,EAfK,CA2CN;EACN;;AAxGgC,C,CA4GjC;;;AACA,eAAetC,GAAf"},"metadata":{},"sourceType":"module"}